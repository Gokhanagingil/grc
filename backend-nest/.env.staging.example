# =============================================================================
# GRC Platform - Staging Environment Configuration
# =============================================================================
# Copy this file to .env.staging and fill in the values.
# This configuration is used for the staging environment on Hetzner.
#
# DO NOT commit actual secrets to version control!
# =============================================================================

NODE_ENV=production
PORT=3002

# -----------------------------------------------------------------------------
# PostgreSQL Database (Docker Compose internal network)
# -----------------------------------------------------------------------------
# When using docker-compose.staging.yml, DB_HOST should be the service name
DB_HOST=db
DB_PORT=5432
DB_USER=grc_staging
DB_PASSWORD=<GENERATE_STRONG_PASSWORD>
DB_NAME=grc_staging

# CRITICAL: Never enable DB_SYNC in staging/production!
# Use database migrations instead.
DB_SYNC=false

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 64
JWT_SECRET=<GENERATE_STRONG_SECRET_64_CHARS_MINIMUM>
JWT_EXPIRES_IN=24h

# Refresh Token Configuration
# REFRESH_TOKEN_SECRET defaults to JWT_SECRET if not set
REFRESH_TOKEN_SECRET=<GENERATE_STRONG_SECRET_64_CHARS_MINIMUM>
REFRESH_TOKEN_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# CORS Settings
# -----------------------------------------------------------------------------
# Set to your staging domain(s) - comma-separated list
# Example: https://niles-grc.com,https://api.niles-grc.com
CORS_ORIGINS=<YOUR_STAGING_DOMAIN>,http://localhost:3000

# -----------------------------------------------------------------------------
# Demo Credentials (for staging testing)
# -----------------------------------------------------------------------------
# Change these to secure values for staging
DEMO_ADMIN_EMAIL=admin@grc-staging.local
DEMO_ADMIN_PASSWORD=<STRONG_STAGING_PASSWORD>

# -----------------------------------------------------------------------------
# Audit Logging
# -----------------------------------------------------------------------------
NEST_AUDIT_LOG_ENABLED=true

# =============================================================================
# Staging Checklist:
# =============================================================================
# [ ] DB_PASSWORD is a strong, unique password
# [ ] JWT_SECRET is at least 64 characters
# [ ] DB_SYNC is set to false
# [ ] CORS_ORIGINS includes staging frontend URL
# [ ] DEMO_ADMIN_PASSWORD is changed from default
# [ ] This file is NOT committed to git (only .example version)
# =============================================================================
