# GRC Platform Backend - Environment Configuration
# Copy this file to .env and update the values

# =============================================================================
# ENVIRONMENT
# =============================================================================
# Options: development, production, test
NODE_ENV=development

# =============================================================================
# SERVER
# =============================================================================
PORT=3001

# =============================================================================
# SECURITY - JWT
# =============================================================================
# REQUIRED: Generate a secure secret with at least 32 characters
# Example: openssl rand -base64 48
# WARNING: The application will NOT start without a valid JWT_SECRET
JWT_SECRET=

# JWT token expiration time
JWT_EXPIRES_IN=24h

# =============================================================================
# SECURITY - CORS
# =============================================================================
# Comma-separated list of allowed origins
# In development, defaults to: http://localhost:3000,http://localhost:3001
# In production, this MUST be set explicitly (no wildcards allowed)
# Example: https://app.example.com,https://admin.example.com
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# =============================================================================
# SECURITY - RATE LIMITING
# =============================================================================
# Global rate limit (all endpoints)
# Window in milliseconds (default: 900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
# Maximum requests per window (default: 100)
RATE_LIMIT_MAX=100

# Auth endpoints rate limit (login, register) - stricter by default
# Window in milliseconds (default: 900000 = 15 minutes)
AUTH_RATE_LIMIT_WINDOW_MS=900000
# Maximum attempts per window (default: 5)
AUTH_RATE_LIMIT_MAX=5

# =============================================================================
# DATABASE
# =============================================================================
# Database client: 'pg' (PostgreSQL) or 'sqlite'
# Default: pg (PostgreSQL is recommended for production)
DB_CLIENT=pg

# PostgreSQL Configuration (used when DB_CLIENT=pg)
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=grc_platform

# PostgreSQL Connection Pool Settings (optional)
DB_POOL_MAX=10
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=5000

# SQLite Configuration (used when DB_CLIENT=sqlite)
# Path to SQLite database file
DB_PATH=./database/grc.db

# =============================================================================
# NESTJS BACKEND PROXY
# =============================================================================
# Base URL for the NestJS backend (used for /api/nest/* proxy routes)
# Default: http://localhost:3002
NEST_API_BASE_URL=http://localhost:3002
